<html>

<head>
    <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.js"></script>
    <script src="https://cdn.bootcss.com/vue/2.5.9/vue.js"></script>
    <style>
        #drop_zone {
            position: fixed;
            width: 100%;
            height: 100%;
            background-size: cover;
        }
    </style>
</head>

<body>

    <div id="drop_zone"></div>
    <output id="list"></output>

    <script>
        function handleFileSelect(evt) {
            evt.stopPropagation();
            evt.preventDefault();

            var files = evt.dataTransfer.files; // FileList object.

            // files is a FileList of File objects. List some properties.
            var output = "";
            for (var i = 0, f; f = files[i]; i++) {
                var reader = new FileReader();
                reader.onload = function(e) {
                    console.log(e.target.result);
                    $.post('/upload', {'instrCode': e.target.result},
                        function(result) {
                            console.log(result)
                        }
                    ).done(function() {
                    });
                };
                reader.readAsText(f);
            }
            document.getElementById('list').innerHTML = output;
        }

        function handleDragOver(evt) {
            evt.stopPropagation();
            evt.preventDefault();
            evt.dataTransfer.dropEffect = 'copy'; // Explicitly show this is a copy.
        }

        // Setup the dnd listeners.
        var dropZone = document.getElementById('drop_zone');
        dropZone.addEventListener('dragover', handleDragOver, false);
        dropZone.addEventListener('drop', handleFileSelect, false);
    </script>
</body>

</html>